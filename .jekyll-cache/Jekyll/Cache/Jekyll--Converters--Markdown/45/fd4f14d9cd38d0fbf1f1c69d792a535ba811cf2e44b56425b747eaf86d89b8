I"¸_<h2 id="å‰è¨€">å‰è¨€</h2>

<p>æœ€è¿‘ç»å¸¸ç¢°åˆ°æ•°ç»„æ‰å¹³åŒ–çš„é—®é¢˜ï¼Œç´¢æ€§å°±è¾¹äº†è§£ <code class="highlighter-rouge">flat</code> ç‰¹æ€§åˆ°å®ç° <code class="highlighter-rouge">flat</code> è¾¹é‡æ–°å­¦ä¹ ä¸€è¾¹æ•°ç»„æ‰å¹³åŒ– <code class="highlighter-rouge">flat</code> æ–¹æ³•å§ã€‚</p>

<h4 id="arrayprototypeflat-ç‰¹æ€§">Array.prototype.flat() ç‰¹æ€§</h4>

<blockquote>
  <p>æ•°ç»„æ‰å¹³åŒ– <code class="highlighter-rouge">Array.proptype.flat()</code> ä¹Ÿå«æ•°ç»„æ‹å¹³æ–¹æ³•ã€æ•°ç»„æ‹‰å¹³ã€æ•°ç»„é™ç»´ã€‚ï¼ˆä¹ æƒ¯ç§°å®ƒä¸ºæ•°ç»„æ‰å¹³åŒ–ï¼Œä¸‹æ–‡å°±ç”¨è¿™ä¸ªç§°è°“å§ã€‚ï¼‰</p>
</blockquote>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">arr_nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">]]]]</span>

<span class="c1">// case1: ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œå±•å¼€â€ä¸€å±‚</span>
<span class="nx">arr_nums</span><span class="p">.</span><span class="nx">flat</span><span class="p">()</span>
<span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, [9, [10]]]</span>

<span class="c1">// case2: ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œæ•´æ•°å³â€œå±•å¼€â€çš„å±‚æ•°</span>
<span class="nx">arr_nums</span><span class="p">.</span><span class="nx">flat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c1">// Â [1, 2, 3, 4, 5, 6, 7, 8, 9, [10]]</span>

<span class="c1">// case3: å½“ Infinity å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„</span>
<span class="nx">arr_nums</span><span class="p">.</span><span class="nx">flat</span><span class="p">(</span><span class="kc">Infinity</span><span class="p">)</span>
<span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>

<span class="c1">// case4: å½“ä¼ å…¥ &lt;=0 çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸åšâ€œå±•å¼€â€</span>
<span class="nx">arr_nums</span><span class="p">.</span><span class="nx">flat</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nx">arr_nums</span><span class="p">.</span><span class="nx">flat</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="c1">// [1, 2, 3, [4, 5, 6], [7, 8, [9, [10]]]]</span>

<span class="c1">// case5: å¦‚æœåŸæ•°ç»„å­˜åœ¨ç©ºä½ï¼Œflat() æ–¹æ³•ä¼šè·³è¿‡ç©ºä½</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">].</span><span class="nx">flat</span><span class="p">()</span>
<span class="c1">// [1, 2, 4, 5]</span>
</code></pre></div></div>

<p><strong><code class="highlighter-rouge">Array.prototype.flat()</code> ç‰¹æ€§æ€»ç»“ï¼š</strong></p>

<ul>
  <li><code class="highlighter-rouge">Array.prototype.flat()</code> ç”¨äºå°†åµŒå¥—çš„æ•°ç»„â€œå±•å¼€â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸”å¯¹åŸæ•°ç»„ä¸ä¼šäº§ç”Ÿå½±å“ã€‚</li>
  <li>ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œå±•å¼€â€ä¸€å±‚ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼ˆ<code class="highlighter-rouge">type: [Number]</code>ï¼‰ï¼Œè¡¨ç¤ºæƒ³è¦â€œå±•å¼€â€çš„å±‚æ•°ã€‚
    <ul>
      <li>ä¼ å…¥ &lt;=0 çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œå±•å¼€â€ã€‚</li>
      <li>å½“ <code class="highlighter-rouge">Infinity</code> å…³é”®å­—ä½œä¸ºå‚æ•°ä¼ å…¥æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„ã€‚</li>
      <li>å¦‚æœåŸæ•°ç»„å­˜åœ¨ç©ºä½ï¼Œ<code class="highlighter-rouge">Array.prototype.flat()</code> ä¼šè·³è¿‡ç©ºä½ã€‚</li>
    </ul>
  </li>
</ul>

<h3 id="æ¥è‡ªé¢è¯•å®˜çš„-nå¤ºè¿å‘½é—®">æ¥è‡ªé¢è¯•å®˜çš„ Nï¼ˆå¤ºï¼‰è¿ï¼ˆå‘½ï¼‰é—®</h3>

<h4 id="ç¬¬ä¸€é—®å®ç°ä¸€ä¸ªç®€å•çš„æ•°ç»„å±•å¼€-flat-å‡½æ•°">ç¬¬ä¸€é—®ï¼šå®ç°ä¸€ä¸ªç®€å•çš„æ•°ç»„å±•å¼€ <code class="highlighter-rouge">flat</code> å‡½æ•°</h4>

<h4 id="å®ç°æ€è·¯">å®ç°æ€è·¯</h4>

<p>æ€è·¯éå¸¸ç®€å•ï¼šå®ç°ä¸€ä¸ªæœ‰æ•°ç»„å±•å¼€åŠŸèƒ½çš„ <code class="highlighter-rouge">flat</code> å‡½æ•°ï¼Œè¦åšçš„æ˜¯<strong>åœ¨æ•°ç»„ä¸­æ‰¾åˆ°æ˜¯æ•°ç»„ç±»å‹çš„å…ƒç´ ï¼Œç„¶åå°†å®ƒä»¬å±•å¼€ã€‚</strong>è¿™æ˜¯å®ç°æ•°ç»„å±•å¼€ <code class="highlighter-rouge">flat</code> æ–¹æ³•çš„å…³é”®æ€è·¯ã€‚</p>

<p>æœ‰äº†æ€è·¯åï¼Œè¦è§£å†³å®ç°è¿™ä¸ªæ€è·¯æ—¶é‡åˆ°çš„é—®é¢˜ï¼š</p>

<ul>
  <li>éå†æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼›
    <ul>
      <li>åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯æ•°ç»„ç±»å‹ï¼›</li>
      <li>å°†æ˜¯æ•°ç»„ç±»å‹çš„å…ƒç´ å±•å¼€ä¸€å±‚ï¼›</li>
    </ul>
  </li>
</ul>

<h4 id="1éå†æ•°ç»„çš„æ–¹æ³•åŒ…æ‹¬ä½†ä¸é™äºä¸‹é¢å‡ ç§">1.éå†æ•°ç»„çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä¸‹é¢å‡ ç§ï¼š</h4>

<ul>
  <li><code class="highlighter-rouge">for</code> å¾ªç¯
    <ul>
      <li><code class="highlighter-rouge">for...of</code></li>
      <li><code class="highlighter-rouge">for...in</code></li>
      <li><code class="highlighter-rouge">forEach</code></li>
      <li><code class="highlighter-rouge">map()</code></li>
      <li><code class="highlighter-rouge">reduce()</code></li>
      <li>â€¦.</li>
    </ul>
  </li>
</ul>

<p>åªè¦æ˜¯èƒ½å¤Ÿéå†æ•°ç»„å–åˆ°æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸€ç§å¯è¡Œçš„è§£å†³æ–¹æ³•ã€‚</p>

<h4 id="2åˆ¤æ–­å…ƒç´ æ˜¯æ•°ç»„çš„æ–¹æ³•">2.åˆ¤æ–­å…ƒç´ æ˜¯æ•°ç»„çš„æ–¹æ³•ï¼š</h4>

<ul>
  <li><code class="highlighter-rouge">instanceof</code>
    <ul>
      <li><code class="highlighter-rouge">constructor</code></li>
      <li><code class="highlighter-rouge">Object.prototype.toString</code></li>
      <li><code class="highlighter-rouge">isArray</code></li>
    </ul>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="kd">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">]],</span> <span class="dl">"</span><span class="s2">arr</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">}]</span>
		<span class="nx">arr</span> <span class="k">instanceof</span> <span class="nb">Array</span>
		<span class="c1">// true</span>
		<span class="nx">arr</span><span class="p">.</span><span class="kd">constructor</span> <span class="o">===</span> <span class="nb">Array</span> 
		<span class="c1">// true</span>
		<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">[object Array]</span><span class="dl">'</span><span class="p">)</span>
		<span class="c1">// true</span>
		<span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
		<span class="c1">// true</span>
	<span class="s2">```

**è¡¥å……è¯´æ˜ï¼š**
  - `</span><span class="k">instanceof</span><span class="s2">` æ“ä½œç¬¦æ˜¯å‡å®šåªæœ‰ä¸€ç§å…¨å±€ç¯å¢ƒï¼Œå¦‚æœç½‘é¡µä¸­åŒ…å«å¤šä¸ªæ¡†æ¶ï¼Œå¤šä¸ªå…¨å±€ç¯å¢ƒï¼Œæ­¤æ—¶ï¼Œä½ ä»ä¸€ä¸ªæ¡†æ¶å‘å¦ä¸€ä¸ªæ¡†æ¶ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆä¼ å…¥çš„æ•°ç»„ä¸åœ¨ç¬¬äºŒä¸ªæ¡†æ¶ä¸­åŸç”Ÿåˆ›å»ºçš„æ•°ç»„åˆ†åˆ«å…·æœ‰å„è‡ªä¸åŒçš„æ„é€ å‡½æ•°ã€‚ï¼ˆæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šä¸å‡†ç¡®ï¼‰ã€‚
	- `</span><span class="k">typeof</span><span class="s2">` æ“ä½œç¬¦å¯¹æ•°ç»„è·å–ç±»å‹ä¼šè¿”å› `</span><span class="nx">object</span><span class="s2">`
	- ç”±äº `</span><span class="kd">constructor</span><span class="s2">` å¯ä»¥è¢«é‡å†™ï¼Œæ‰€ä»¥ä¸èƒ½ç¡®ä¿ä¸€å®šæ˜¯æ•°ç»„ã€‚
	  
		```</span><span class="nx">js</span>
			<span class="kd">const</span> <span class="nx">strs</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">zhangsan</span><span class="dl">'</span>
			<span class="nx">strs</span><span class="p">.</span><span class="kd">constructor</span> <span class="o">=</span> <span class="nb">Array</span>
			<span class="nx">strs</span><span class="p">.</span><span class="kd">constructor</span> <span class="o">===</span> <span class="nb">Array</span>
			<span class="c1">// true</span>
		<span class="s2">```

#### 3.å°†æ˜¯æ•°ç»„ç±»å‹çš„å…ƒç´ å±•å¼€ä¸€å±‚çš„æ–¹æ³•ï¼š

  - æ‰©å±•è¿ç®—ç¬¦(`</span><span class="p">...</span><span class="s2">`) + `</span><span class="nx">concat</span><span class="s2">`
	
	&gt; `</span><span class="nx">concat</span><span class="p">()</span><span class="s2">` æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œåœ¨æ‹¼æ¥çš„è¿‡ç¨‹ä¸­åŠ ä¸Šæ‰©å±•è¿ç®—ç¬¦ä¼šå±•å¼€ä¸€å±‚æ•°ç»„ã€‚
	
	- `</span><span class="nx">concat</span><span class="s2">` + `</span><span class="nx">apply</span><span class="s2">`

	&gt; ä¸»è¦æ˜¯åˆ©ç”¨ `</span><span class="nx">apply</span><span class="s2">` åœ¨ç»‘å®šä½œç”¨åŸŸæ—¶ï¼Œä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»æ•°ç»„å¯¹è±¡ï¼Œå…¶ä¸­çš„æ•°ç»„å…ƒç´ å°†ä½œä¸ºå•ç‹¬çš„å‚æ•°ä¼ ç»™å‡½æ•°ã€‚å³åœ¨è°ƒç”¨ `</span><span class="nx">apply</span><span class="s2">` å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå°†ä¼ å…¥çš„æ•°ç»„ä¸€ä¸ªä¸€ä¸ªçš„ä¼ å…¥åˆ°è¦æ‰§è¡Œçš„å‡½æ•°ä¸­ï¼Œä¹Ÿå°±ç›¸å½“äºå¯¹æ•°ç»„è¿›è¡Œäº†ä¸€å±‚çš„å±•å¼€ã€‚

	- `</span><span class="nx">toString</span><span class="s2">` + `</span><span class="nx">split</span><span class="s2">`

	&gt; ä¸æ¨èä½¿ç”¨ `</span><span class="nx">toString</span> <span class="o">+</span> <span class="nx">split</span><span class="s2">` æ–¹æ³•ï¼Œæ“ä½œå­—ç¬¦ä¸²æ˜¯å¾ˆå±é™©çš„äº‹æƒ…ã€‚å¦‚æœèƒ½ç¡®ä¿æ•°ç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯æ•°å­—ç±»å‹çš„è¯ï¼Œ`</span><span class="nx">toString</span><span class="s2">` + `</span><span class="nx">split</span><span class="s2">` è¿˜æ˜¯å¯è¡Œçš„ã€‚

	```</span><span class="nx">js</span>
		<span class="kd">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">]],</span> <span class="dl">"</span><span class="s2">arr</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">}]</span>
		<span class="c1">// case1: æ‰©å±•è¿ç®—ç¬¦(`...`) + `concat`</span>
		<span class="p">[].</span><span class="nx">concat</span><span class="p">(...</span><span class="nx">arr</span><span class="p">)</span>
		<span class="c1">// [1, 2, 3, 4, 5, [6], "arr", {type: "array"}]</span>

		<span class="c1">// case2: `concat` + `apply`</span>
		<span class="p">[].</span><span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">([],</span> <span class="nx">arr</span><span class="p">)</span>
		<span class="c1">// // [1, 2, 3, 4, 5, [6], "arr", {type: "array"}]</span>

		<span class="c1">// case3: `toString` + `split`</span>
		<span class="kd">const</span> <span class="nx">arr_nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]]]</span>
		<span class="nx">arr_nums</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">n</span> <span class="o">=&gt;</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">n</span><span class="p">))</span>
		<span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
	<span class="s2">```

	åˆ†æå®Œè¦è§£å†³çš„é—®é¢˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥éå¸¸è½»æ¾çš„å®ç°ä¸€ç‰ˆæ•°ç»„æ‰å¹³åŒ– `</span><span class="nx">flat</span><span class="s2">` å‡½æ•°äº†ã€‚

	```</span><span class="nx">js</span>
		<span class="kd">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">]]],</span> <span class="mi">11</span><span class="p">,</span> <span class="dl">"</span><span class="s2">arr</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">}]</span>
		<span class="c1">// concat + é€’å½’</span>
		<span class="kd">function</span> <span class="nx">flat</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
			<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="nx">array</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span> <span class="p">{</span>
					<span class="c1">// é€’å½’å¤„ç†</span>
					<span class="nx">result</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span>
					<span class="c1">// æˆ–è€…ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦</span>
					<span class="c1">// array_reulst.push(...arguments.callee(item))</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span>
				<span class="p">}</span>
			<span class="p">})</span>
			<span class="k">return</span> <span class="nx">result</span>
		<span class="p">}</span>
		<span class="nx">flat</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
		<span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, "arr", {type: "array"}]</span>
	<span class="s2">```

#### ç¬¬äºŒé—®ï¼šç”¨ `</span><span class="nx">reduce</span><span class="s2">` å®ç° `</span><span class="nx">flat</span><span class="s2">` å‡½æ•°
 
  ```</span><span class="nx">js</span>
		<span class="kd">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">]]],</span> <span class="mi">11</span><span class="p">,</span> <span class="dl">"</span><span class="s2">arr</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">}]</span>
		
		<span class="c1">// ç”¨ reduce å°†æ•°ç»„å±•å¼€ä¸€å±‚</span>
		<span class="nx">arr</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">curr</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">curr</span><span class="p">),</span> <span class="p">[])</span>
    <span class="c1">// [1, 2, 3, 4, 5, 6, 7, [8, 9, [10]], 11, "arr", {type: "array"}] </span>
		
		<span class="c1">// ç”¨ reduce å°†æ•°ç»„å±•å¼€æˆä¸€ç»´æ•°ç»„</span>
		<span class="kd">const</span> <span class="nx">flat</span> <span class="o">=</span> <span class="nx">array</span> <span class="o">=&gt;</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">array</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">curr</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">curr</span><span class="p">)</span> <span class="p">?</span> <span class="nx">flat</span><span class="p">(</span><span class="nx">curr</span><span class="p">)</span> <span class="p">:</span> <span class="nx">curr</span><span class="p">)</span> 
			<span class="p">},</span> <span class="p">[])</span>
		<span class="p">}</span>
		<span class="nx">flat</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
		<span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, "arr", {type: "array"}]</span>
</code></pre></div></div>

<h4 id="ç¬¬ä¸‰é—®ä½¿ç”¨æ ˆçš„æ€æƒ³å®ç°-flat-å‡½æ•°">ç¬¬ä¸‰é—®ï¼šä½¿ç”¨æ ˆçš„æ€æƒ³å®ç° <code class="highlighter-rouge">flat</code> å‡½æ•°</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">function</span> <span class="nx">flat</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="c1">// å°†æ•°ç»„å…ƒç´ æ‹·è´åˆ°æ ˆï¼Œç›´æ¥èµ‹å€¼ä¼šæ”¹å˜åŸæ•°ç»„</span>
			<span class="kd">const</span> <span class="nx">stack</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
			<span class="c1">// å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œåˆ™å¾ªç¯éå†</span>
			<span class="nx">whlie</span> <span class="p">(</span><span class="nx">stack</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span>
				<span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
					<span class="c1">// å¦‚æœå½“å‰å…ƒç´ æ˜¯æ•°ç»„ç±»å‹ï¼Œå†æ¬¡æ”¾å…¥æ ˆä¸­ï¼Œå¹¶å±•å¼€ä¸€å±‚</span>
					<span class="nx">stack</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">value</span><span class="p">)</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="c1">// å¦‚æœå½“å‰å…ƒç´ ä¸æ˜¯æ•°ç»„ç±»å‹ï¼Œå°±å°†å…¶å–å‡ºæ¥ç›´æ¥æ”¾å…¥è¿”å›çš„ç»“æœä¸­</span>
					<span class="nx">reulst</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="k">return</span> <span class="nx">result</span>
		<span class="p">}</span>
		<span class="kd">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">]]],</span> <span class="mi">11</span><span class="p">,</span> <span class="dl">"</span><span class="s2">arr</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">array</span><span class="dl">"</span><span class="p">}]</span>
		<span class="nx">flat</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
		<span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, "arr", {type: "array"}]</span>
</code></pre></div></div>

<h4 id="ç¬¬å››é—®é€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶æ•°ç»„å±•å¼€å±‚æ•°">ç¬¬å››é—®ï¼šé€šè¿‡ä¼ å…¥æ•´æ•°å‚æ•°æ§åˆ¶æ•°ç»„â€œå±•å¼€â€å±‚æ•°</h4>

<p><code class="highlighter-rouge">js
	  function flat(array, num=1) {
			return num &gt; 0 ? 
			  array.reduce(
					(prev, curr) =&gt; 
						prev.concat(Array.isArray(curr) ? flat(curr, num - 1) : curr)
						,[]) 
				  : array.slice()
		}
    const arr = [1, 2, 3, 4, 5, [6, 7, [8, 9, [10]]], 11, "arr", {type: "array"}]
		flat(arr, Infinity)
		// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, "arr", {type: "array"}]
	</code></p>

<h4 id="ç¬¬äº”é—®ä½¿ç”¨-generator-å®ç°-flat-å‡½æ•°">ç¬¬äº”é—®ï¼šä½¿ç”¨ <code class="highlighter-rouge">Generator</code> å®ç° <code class="highlighter-rouge">flat</code> å‡½æ•°</h4>

<p><code class="highlighter-rouge">js
	  function* flat(array, num) {
			num = num || 1
			for (const item of array) {
				if (Array.isArray(item) &amp;&amp; num &gt; 0) {
					yield* flat(item, num - 1)
				} else {
					yield item
				}
			}
		}
		const arr = [1, 2, 3, 4, 5, [6, 7, [8, 9, [10]]], 11, "arr", {type: "array"}]
		// è°ƒç”¨ Generator å‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„ä¹Ÿä¸æ˜¯è¿è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯éå†å¯¹è±¡ (Iterator Object)ã€‚æ‰€ä»¥è¦ç”¨ä¸€æ¬¡æ‰©å±•è¿ç®—ç¬¦å¾—åˆ°ç»“æœã€‚
		console.log([...flat(arr, Infinity)])
	</code></p>

:ET